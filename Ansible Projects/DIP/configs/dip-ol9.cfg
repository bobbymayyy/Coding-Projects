# Generated by MAY
# version=DIP-OL9
# premade for 500GB SSD

# INSTALL TYPE
graphical

# REPO(s)
repo --name="AppStream" --baseurl=file:///run/install/sources/mount-0000-hdd-device/AppStream #- uncomment for physical deployment (VENTOY)
#repo --name="AppStream" --baseurl=file:///run/install/sources/mount-0000-cdrom/AppStream #- uncomment for VM deployment

# KDUMP
%addon com_redhat_kdump --disable
%end

# STIG
%addon com_redhat_oscap
    content-type = scap-security-guide
    datastream-id = scap_org.open-scap_datastream_from_xccdf_ssg-ol9-xccdf.xml
    xccdf-id = scap_org.open-scap_cref_ssg-ol9-xccdf.xml
    profile = xccdf_org.ssgproject.content_profile_stig_gui
%end

# KEYBOARD
keyboard --xlayouts='us'

# LANGUAGE
lang en_US.UTF-8

# NETWORK
network --bootproto=dhcp --device=link --noipv6 --activate
network --hostname=analysttt

# INSTALLATION DRIVE/MEDIA
harddrive --dir= --partition=/dev/sda2 #- uncomment for physical deployment (VENTOY)
#cdrom #- uncomment for VM deployment

# PACKAGES
%packages
@^workstation-product-environment
aide
audispd-plugins
audit
chrony
crypto-policies
fapolicyd
firewalld
gnutls-utils
initial-setup
libreswan
nss-tools
opensc
openscap
openscap-scanner
openssh-clients
openssh-server
openssl-pkcs11
pcsc-lite
policycoreutils
policycoreutils-python-utils
rng-tools
rsyslog
rsyslog-gnutls
s-nail
scap-security-guide
sudo
tmux
usbguard
-iprutils
-quagga
-rsh-server
-sendmail
-telnet-server
-tftp-server
-tuned
-vsftpd
dialog
ansible-core
%end

# SETUP AGENT
firstboot --enable

# OS DRIVE/MEDIA
ignoredisk --only-use=disk/by-diskseq/1

# PARTITION CLEARING
clearpart --all --drives=disk/by-diskseq/1 --initlabel

# DRIVE/MEDIA PARTITIONING
part pv.116 --fstype="lvmpv" --ondisk=disk/by-diskseq/1 --size=486761
part /boot/efi --fstype="efi" --ondisk=disk/by-diskseq/1 --size=600 --fsoptions="umask=0077,shortname=winnt"
part /boot --fstype="xfs" --ondisk=disk/by-diskseq/1 --size=1024
volgroup ol --pesize=4096 pv.116
logvol / --fstype="xfs" --size=367760 --name=root --vgname=ol
logvol /home --fstype="xfs" --size=102400 --name=home --vgname=ol
logvol /tmp --fstype="xfs" --size=1024 --name=tmp --vgname=ol
logvol /var --fstype="xfs" --size=5120 --name=var --vgname=ol
logvol /var/tmp --fstype="xfs" --size=1024 --name=var_tmp --vgname=ol
logvol /var/log --fstype="xfs" --size=1024 --name=var_log --vgname=ol
logvol /var/log/audit --fstype="xfs" --size=512 --name=var_log_audit --vgname=ol
logvol swap --fstype="swap" --size=7894 --name=swap --vgname=ol

# TIMEZONE
timezone America/New_York --utc

# ROOT PWD
rootpw --lock

# USERS
user --groups=wheel --name=defender --password=$6$FbVad4EAtwiyTWF3$K7gGJ9ZpM8AgVrk93fpCFrMCtipdmpQWFSrWU/vXUF1lDWm6zXzvY16Ao7ieEH3NIMDpk.JNzkybu2sz4A02x0 --iscrypted --gecos="defender"
user --groups=wheel --name=nerdadmin --password=$6$FbVad4EAtwiyTWF3$K7gGJ9ZpM8AgVrk93fpCFrMCtipdmpQWFSrWU/vXUF1lDWm6zXzvY16Ao7ieEH3NIMDpk.JNzkybu2sz4A02x0 --iscrypted --gecos="nerdadmin"
