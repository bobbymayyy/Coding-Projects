paths:
  # Where the mirrored/published repo tree lives (portable drive mount or local path)
  repo_root: /media/offlinerepo/OFFLINEREPO

  # Optional: if set, "sync" will also rsync repo_root -> permanent_root
  permanent_root: ""

  # Base URL clients will use (your offline webserver)
  publish_url_base: http://repo.local/repo/

global:
  # Default architectures to include (used where supported)
  architectures: [amd64]
 
  # Keep last N APT snapshots per mirror (aptly)
  keep_snapshots: 2

  # Default keyrings for aptly mirror signature verification.
  # These should exist INSIDE the debian aptly container at runtime.
  # (You can override per-distro or per-mirror.)
  apt_keyrings_default:
    - /usr/share/keyrings/debian-archive-keyring.gpg
    - /usr/share/keyrings/ubuntu-archive-keyring.gpg
    - /usr/share/keyrings/proxmox-release.gpg
    - /usr/share/keyrings/kali-archive-keyring.gpg
    - /usr/share/keyrings/cuda-archive-keyring.gpg

  # aptly custom repo signing key
  aptly_gpg_key: "YOUR_FULL_FINGERPRINT"

  # Error handling control knobs
  fail_fast: false
  cmd_timeout_sec: 0   # 0 = no timeout; set to e.g. 7200 for 2h

containers:
  # You will build these images once with the Dockerfiles below
  debian_image: offline-repo/debian-apt:stable
  fedora_image: offline-repo/fedora-rpm:latest

apt:
   - name: debian
     enabled: false
     # Optional: tighten default keyrings for this distro (merged after global defaults)
     apt_keyrings:
       - /usr/share/keyrings/debian-archive-keyring.gpg
     mirrors:
       - mirror_name: debian-trixie
         # Upstream URL
         url: https://deb.debian.org/debian/
         # APT distribution/suite
         distribution: trixie
         # Components
         components: [main, contrib, non-free, non-free-firmware]
         # Architectures (overrides global if set)
         architectures: [amd64]
       - mirror_name: debian-security-trixie
         url: https://security.debian.org/debian-security/
         distribution: trixie-security
         components: [main, contrib, non-free, non-free-firmware]
         architectures: [amd64]
 
   - name: ubuntu
     enabled: false
     apt_keyrings:
       - /usr/share/keyrings/ubuntu-archive-keyring.gpg
     mirrors:
       - mirror_name: ubuntu-jammy
         url: https://archive.ubuntu.com/ubuntu/
         distribution: jammy
         components: [main, restricted, universe, multiverse]
         architectures: [amd64]
       - mirror_name: ubuntu-jammy-updates
         url: https://archive.ubuntu.com/ubuntu/
         distribution: jammy-updates
         components: [main, restricted, universe, multiverse]
         architectures: [amd64]
       - mirror_name: ubuntu-jammy-security
         url: https://security.ubuntu.com/ubuntu/
         distribution: jammy-security
         components: [main, restricted, universe, multiverse]
         architectures: [amd64]
 
   - name: kali
     enabled: false
     apt_keyrings:
       - /usr/share/keyrings/kali-archive-keyring.gpg
     mirrors:
       - mirror_name: kali-rolling
         url: https://http.kali.org/kali/
         distribution: kali-rolling
         components: [main, contrib, non-free, non-free-firmware]
         architectures: [amd64]
 
   - name: proxmox
     enabled: false
     apt_keyrings:
       - /usr/share/keyrings/proxmox-release.gpg
     mirrors:
       # Example for Proxmox on Debian bookworm (no-subscription)
       - mirror_name: proxmox-trixie
         url: https://download.proxmox.com/debian/pve/
         distribution: trixie
         components: [pve-no-subscription]
         architectures: [amd64]
 
   # NVIDIA CUDA APT repo (add if you want it mirrored via aptly)
   - name: cuda
     enabled: false
     mirrors:
       - mirror_name: cuda-debian12
         url: https://developer.download.nvidia.com/compute/cuda/repos/debian12/x86_64/
         # NVIDIA uses a flat repo; aptly wants a "distribution" argument.
         # "/" works well for these style repos in aptly mirror create.
         distribution: /
         components: []
         architectures: [amd64]
         keyrings:
           - /usr/share/keyrings/cuda-archive-keyring.gpg
         # Make this mirror only trust the CUDA keyring (instead of global defaults)
         keyrings_mode: replace

rpm:
  - name: fedora
    enabled: false
    releasever: "43"
    arch: x86_64
    repos:
      # Repo IDs must exist in your container's /etc/yum.repos.d
      - repoid: fedora
      - repoid: updates

  - name: rocky
    enabled: false
    releasever: "9"
    arch: x86_64
    repos:
      - repoid: baseos
      - repoid: appstream
      - repoid: extras

  - name: rhel
    enabled: false
    releasever: "9"
    arch: x86_64
    repos:
      - repoid: rhel-9-baseos-rpms
      - repoid: rhel-9-appstream-rpms
    notes: "RHEL mirroring requires entitlements/subscription access. Treat as special mode."

apk:
  - name: alpine
    enabled: false
    mirrors:
      # rsync module names vary by mirror. http mirroring is also possible.
      - mirror_name: alpine-v3.21-main
        rsync_url: rsync://rsync.alpinelinux.org/alpine/v3.21/main
      - mirror_name: alpine-v3.21-community
        rsync_url: rsync://rsync.alpinelinux.org/alpine/v3.21/community
